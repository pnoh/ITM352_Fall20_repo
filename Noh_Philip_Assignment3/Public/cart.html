
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link href="stylesheet.css" rel="stylesheet">
    <script>
        //Code taken from Dan Port's Assignment 3 Examples and class examples
    </script>
        <script src="./functions.js"></script>
        <script>
            var products_data;
            loadJSON('get_products_data', function (response) {
                // Parsing JSON string into object
                products_data = JSON.parse(response);
            });
            loadJSON('get_cart', function (response) {
                // Parsing JSON string into object
                shopping_cart = JSON.parse(response);
            });
        </script>
    </head>    

<body>
    <h1>You are Ordering:</h1>
<table border><th>Quantity</th><th>Item</th>

<br>
<script>
  for(product_key in products_data) {
    for(i=0; i<products_data[product_key].length; i++) {
        if(typeof shopping_cart[product_key] == 'undefined') 
            continue;
        qty = shopping_cart[product_key][i];
        if(qty > 0) {
          document.write(`<tr><td>${qty}</td><td>${products_data[product_key][i].name}</td><tr>`);
        }
    }
}
</script>
</table>
<br>
<div>
    <form action="/login.html" method="GET">
        <strong><input type="submit" value="Purchase!" name="purchase_submit"></strong>
    </form>
    
</div>
<div>
    <form action="/display_products.html" method="GET">
        <strong><input type="submit" value="Continue Shopping" name="/display_products.html"></strong>
    </form>
    
</div>

</body>
</html>